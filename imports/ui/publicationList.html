<template name="publicationList">
  <section>
    {{> searchBar}}

    <div class="pad">
      <div class="flex-row">
        <h1 class="flex-max">Publications</h1>
        <a class="plus-btn text-primary text-primary-hover" href="/app/publications/new">
          <span class="glyphicon glyphicon-plus-sign"></span>
        </a>
      </div>

      {{#each publications}}
        <div class="card flex-row open-publication pointer" data-id={{_id}}>
          <div class="flex-max">
            <div class="card-left-top">
              <span>{{maxLength title 30}}</span>
              {{#if subtitle}}
                <small>Â· {{maxLength subtitle 30}}</small>
              {{/if}}
            </div>
            <div class="card-left-bottom">
              {{#if tags}}
                <small class="glyphicon glyphicon-tags text-primary pad-right-sm"></small>
              {{/if}}
              <span>{{author}}</span>
              {{#if publisher}}
                <span>({{publisher}})</span>
              {{/if}}
            </div>
          </div>

          <div class="flex-column flex-self-stretch">
            <div class="card-right-top flex-max">
              {{#if rating}}
                <span>{{rating}}</span>
                <span class="glyphicon glyphicon-star text-icon text-primary"></span>
              {{/if}}
            </div>
            <div class="card-right-bottom">
              <span>{{type}}</span>
              {{#if isRented this}}
                <span class="text-primary">is rented</span>
              {{/if}}
            </div>
          </div>
        </div>
      {{/each}}
    </div>
  </section>
</template>
