<template name="library">
  <section class="pad">
    <div>
      {{#if eqMode "VIEW"}}
        <button type="button" class="btn btn-primary enter-form-mode">Edit</button>
      {{/if}}

      {{#if eqMode "FORM"}}
        <button type="button" class="btn btn-default enter-view-mode">Abort</button>
        <button type="button" class="btn btn-success save-changes">Save</button>
      {{/if}}
    </div>

    <!-- VIEW -->

    {{#if eqMode "VIEW"}}
      <h3>
        <span>{{library.name}}</span>
        {{#if library.organization}}
          <span class="text-light">Â· {{library.organization}}</span>
        {{/if}}
      </h3>

      <div class="card">
        <h4 class="text-light">General</h4>

        <div class="row">
          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
            {{#if library.email}}
              <p>
                <span class="glyphicon glyphicon-envelope pad-right-sm"></span>
                <a href="mailto:{{library.email}}">{{library.email}}</a>
              </p>
            {{/if}}
            {{#if library.phone}}
            <p>
              <span class="glyphicon glyphicon-earphone pad-right-sm"></span>
              <a href="call:{{library.phone}}">{{library.phone}}</a>
            </p>
            {{/if}}
          </div>

          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
            {{#if inlineAddress library.address}}
            <p>
              <span class="glyphicon glyphicon-map-marker pad-right-sm"></span>
              <span>{{inlineAddress library.address}}</span>
            </p>
            {{/if}}
            {{#if library.notes}}
            <p>
              <span class="glyphicon glyphicon-comment pad-right-sm"></span>
              <span>{{library.notes}}</span>
            </p>
            {{/if}}
          </div>
        </div>
      </div>

      <div class="card">
        <h4 class="text-light">Team</h4>

        <table class="table table-hover table-striped">
          <thead>
            <tr>
              <th>Username</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody>
            {{#each libraryUsers}}
            <tr>
              <td>{{username}}</td>
              <td>{{profile.role}}</td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    {{/if}}

    <!-- FORM -->

    {{#if eqMode "FORM"}}
      <div class="whitespace"></div>

      <div class="card">
        <h4 class="text-light">General</h4>

        <div class="row">
          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <label>Name</label>
            <input class="form-control" type="text" name="name" value={{library.name}}>
          </div>

          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <label>Organization</label>
            <input class="form-control" type="text" name="organization" value={{library.organization}}>
          </div>
        </div>

        <div class="row">
          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <label>Email</label>
            <input class="form-control" type="text" name="email" value={{library.email}}>
          </div>

          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <label>Phone</label>
            <input class="form-control" type="text" name="phone" value={{library.phone}}>
          </div>
        </div>
      </div>

      <div class="card">
        <h4 class="text-light">Address</h4>

        <div class="row">
          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <label>Street</label>
            <input class="form-control" type="text" name="street" value={{library.address.street}}>
          </div>

          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <label>Postal Code</label>
            <input class="form-control" type="text" name="postal_code" value={{library.address.postal_code}}>
          </div>
        </div>

        <div class="row">
          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <label>City</label>
            <input class="form-control" type="text" name="city" value={{library.address.city}}>
          </div>
        </div>
      </div>

      <div class="card">
        <h4 class="text-light">Notes</h4>

        <div class="form-group">
          <textarea class="form-control" rows="3" name="notes">{{library.notes}}</textarea>
        </div>
      </div>
    {{/if}}

  </section>
</template>
