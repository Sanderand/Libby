<template name="publicationRent">
  <section class="pad">
    <div>
      <a href="/app/publications/{{publicationId}}"><button type="button" class="btn btn-default">Back</button></a>
      {{#if selectedPatron}}
        <button type="button" class="btn btn-primary rent-publication">Save</button>
      {{/if}}
    </div>

    <div class="whitespace"></div>

    <div class="card">
      <h4 class="text-light">Search patron</h4>

      <form class="form-group search-form">
        <div class="input-group mar-bottom-sm">
          <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
          <input class="form-control" type="text" name="searchQuery" placeholder="Hit return to search a patron">
        </div>
      </form>
    </div>

    {{#if searchPending}}
      {{> spinner}}
    {{else}}
      {{#if searchDone}}
        <div class="card">
          <h4 class="text-light">Results</h4>

          {{#if searchResults.count}}
            <div class="results">
              {{#each searchResults}}
                <div class="chip select-patron {{activeClass this._id}}" data-id={{this._id}}>
                  <span class="chip-label">{{this.first_name}} {{this.last_name}}</span>
                  <span class="chip-btn">
                    <span class="glyphicon glyphicon-ok"></span>
                  </span>
                </div>
              {{/each}}
            </div>
          {{else}}
            <div>Couldn't find patron for the criteria XYZ</div>
          {{/if}}
        </div>
      {{/if}}
    {{/if}}

  </section>
</template>
